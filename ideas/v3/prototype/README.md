# FarmLab Data - Prototype README

## โครงสร้างข้อมูลที่กำลังออกแบบ

### แนวคิด: Crop-based Structure

```
โครงการ: "ทดลองพืชผักใบ 4 ชนิด"
│
├─ ตั้งโอ๋
│   ├─ รอบที่ 1 (Crop 1)
│   ├─ รอบที่ 2 (Crop 2)
│   └─ รอบที่ 3 (Crop 3)
│
├─ เคล
│   ├─ รอบที่ 1
│   ├─ รอบที่ 2
│   └─ รอบที่ 3
│
├─ Sorrel
│   ├─ รอบที่ 1
│   └─ รอบที่ 2 (ปลูกแค่ 2 รอบ)
│
└─ Frillice
    ├─ รอบที่ 1
    ├─ รอบที่ 2
    └─ รอบที่ 3
```

**Logic:**
- **โครงการ** → กำหนดผักที่จะปลูก (เลือกตอนสร้างโครงการ)
- **แต่ละผัก** → มีรอบของตัวเอง (จำนวนรอบไม่จำเป็นต้องเท่ากัน)
- **แต่ละรอบ** → มีข้อมูลการเติบโต + IoT + รูปภาพ

### ข้อดี:
- แต่ละผักมีรอบอิสระ (Sorrel อาจปลูก 2 รอบ, อื่นๆ 3 รอบ)
- เริ่มปลูกแต่ละผักคนละเวลาได้
- ตรงกับการปฏิบัติจริงในฟาร์ม

---

## Integration: IoT + กล้อง

### ข้อมูลที่บันทึกแต่ละครั้ง มี 3 แหล่ง:

#### A. ข้อมูลบันทึกเอง (Manual)
- ความสูง (cm)
- จำนวนใบ
- ขนาดใบ (cm)
- น้ำหนัก (g)
- บันทึกเพิ่มเติม

#### B. ข้อมูลจาก IoT Sensors (Auto)
- **pH** - ค่าความเป็นกรด-ด่าง
- **EC (mS/cm)** - ค่าความเข้มข้นปุ๋ย
- **Temperature (°C)** - อุณหภูมิ
- **Humidity (%)** - ความชื้น
- **CO2 (ppm)** - ปริมาณคาร์บอนไดออกไซด์
- **PPFD (µmol/m²/s)** - ความเข้มแสง

#### C. รูปภาพ (Auto/Manual)
- กล้องถ่ายอัตโนมัติ
- อัพโหลดรูปเอง

---

## โครงสร้างข้อมูล (Data Structure)

```javascript
project = {
    id: 1,
    name: "ทดลองพืชผักใบ 4 ชนิด",
    owner: "ทีมวิจัย Lab A",
    greenhouse: "Lab A",  // เชื่อมกับ IoT sensors
    startDate: "2025-03-01",
    crops: [
        {
            id: 1,
            name: "ตั้งโอ๋",
            variety: "ตั้งโอ๋ 35 วัน",
            rounds: [
                {
                    roundNumber: 1,
                    plantDate: "2025-03-01",
                    records: [
                        {
                            date: "2025-03-15",
                            age: 15,
                            stage: "สัปดาห์ที่ 2",
                            manual: {
                                height: "12.5-15.2",
                                leafCount: "8-10ใบ",
                                canopy: "10.2-12.8",
                                weight: "-"
                            },
                            iot: {
                                pH: 6.2,
                                ec: 2.1,
                                temp: 26.5,
                                humidity: 65,
                                co2: 850,
                                ppfd: 250,
                                timestamp: "2025-03-15T10:30:00"
                            },
                            images: ["url1", "url2"],
                            notes: "เติบโตดี"
                        }
                    ]
                },
                {
                    roundNumber: 2,
                    plantDate: "2025-06-10",
                    records: [...]
                }
            ]
        },
        {
            id: 2,
            name: "เคล",
            variety: "เคล 47 วัน",
            rounds: [...]
        }
    ]
}
```

---

## ฟีเจอร์หลัก

### 1. จัดการโครงการ (Project Management)
- สร้างโครงการใหม่
- กำหนด: ชื่อ, ผู้รับผิดชอบ, โรงเรือน
- เลือกผักที่จะปลูก (checkbox หรือ dropdown หลายตัว)

**Project Card แสดง:**
- ชื่อโครงการ
- จำนวนรอบ (รวมทุกผัก หรือแยกตามผัก)
- ผู้รับผิดชอบ
- โรงเรือน

### 2. บันทึกข้อมูล (Data Entry)
- เลือกโครงการ → ผัก → รอบ
- แสดง **ค่า IoT real-time** จากโรงเรือน
- มีปุ่ม "ดึงค่า Sensor" → บันทึกค่า pH, EC, Temp ลงในบันทึกนั้นๆ
- อัพโหลดรูปภาพ (+ อนาคต: ดึงจากกล้องอัตโนมัติ)
- บันทึกข้อมูลการเติบโต (Manual)

### 3. Dashboard - IoT Sensors
- เลือกโรงเรือน → แสดงข้อมูล Sensor real-time
- แสดงกราฟย้อนหลัง (pH, EC, Temp, CO2, PPFD)
- เชื่อมโยง Sensor กับโครงการที่กำลังดำเนินการ

---

## การเชื่อมต่อ IoT

### โรงเรือน → Sensor Sets

**โรงเรือน No.1:**
- pH Sensor
- EC Sensor
- Temperature/Humidity Sensor
- CO2 Sensor
- PPFD Sensor

**Lab A:**
- (Sensor set เดียวกัน)

**Blue Room:**
- (Sensor set เดียวกัน + ควบคุมอุณหภูมิ)

### ตอนบันทึกข้อมูล:
1. เลือกโครงการ → ระบบรู้ว่าอยู่โรงเรือนไหน
2. แสดงค่า Sensor real-time จากโรงเรือนนั้น
3. กดปุ่ม "ดึงค่า Sensor" → บันทึก timestamp + ค่าทุกตัว

---

## คำถามที่ต้องตัดสินใจ

1. **ตอนสร้างโครงการ:**
   - กำหนดผักที่จะปลูกเลยไหม? (checkbox: ตั้งโอ๋, เคล, Sorrel, Frillice)
   - หรือให้เพิ่มผักทีละตัวภายหลัง?

2. **จำนวนรอบของแต่ละผัก:**
   - กำหนดตอนสร้างโครงการ? (เช่น ตั้งโอ๋ 3 รอบ, Sorrel 2 รอบ)
   - หรือค่อยสร้างรอบทีละรอบเมื่อเริ่มปลูก?

3. **โรงเรือน → Sensor:**
   - 1 โรงเรือน = 1 Sensor set ใช่ไหม?
   - ถ้าในโรงเรือนเดียวกันปลูกหลายโครงการ → ใช้ค่า Sensor เดียวกัน?

4. **กล้องอัตโนมัติ:**
   - กล้องติดที่โรงเรือน หรือติดแต่ละจุดปลูก?
   - ถ่ายตามกำหนดเวลา หรือ manual trigger?

---

## Next Steps

- [ ] ปรับโครงสร้างข้อมูลจาก Round-based → Crop-based
- [ ] เพิ่มฟิลด์เลือกผักในฟอร์มสร้างโครงการ
- [ ] เชื่อม IoT Sensors กับโรงเรือน
- [ ] เพิ่มฟีเจอร์ "ดึงค่า Sensor" ในหน้าบันทึกข้อมูล
- [ ] เชื่อม Dashboard กับโครงการที่เลือก

---

## Files

- `farmlab-data.html` - Prototype หลัก (ยังเป็น Round-based อยู่)

---

**Last Updated:** 2025-01-07
