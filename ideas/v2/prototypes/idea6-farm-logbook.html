<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Logbook - Idea 6</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 25px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 25px;
        }

        h1 {
            color: #333;
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #666;
            font-size: 0.95rem;
        }

        .tab-nav {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab-button {
            padding: 12px 24px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 600;
            transition: all 0.3s;
            color: #666;
        }

        .tab-button:hover {
            border-color: #43cea2;
            color: #43cea2;
        }

        .tab-button.active {
            background: #43cea2;
            color: white;
            border-color: #43cea2;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .card h2 {
            color: #333;
            font-size: 1.3rem;
            margin-bottom: 20px;
        }

        .projects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .project-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .project-card h3 {
            color: #43cea2;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .project-meta {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 0.9em;
            color: #666;
        }

        .crop-icon {
            font-size: 120px;
            text-align: center;
            padding: 40px 0;
        }

        .data-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: all 0.3s;
            cursor: pointer;
        }

        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        }

        .data-card-content {
            padding: 15px;
        }

        .data-card-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .data-card-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
            font-size: 0.9rem;
            color: #666;
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .badge.green {
            background: #d4edda;
            color: #155724;
        }

        .badge.blue {
            background: #d1ecf1;
            color: #0c5460;
        }

        .badge.yellow {
            background: #fff3cd;
            color: #856404;
        }

        .badge.red {
            background: #f8d7da;
            color: #721c24;
        }

        .badge.orange {
            background: #ffe5cc;
            color: #cc5200;
        }

        .badge.active {
            background: #d4edda;
            color: #155724;
        }

        .badge.completed {
            background: #e2e3e5;
            color: #383d41;
        }

        .btn {
            padding: 12px 30px;
            background: #43cea2;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            background: #3ab890;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 206, 162, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .back-btn {
            background: #6c757d;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-block;
        }

        .back-btn:hover {
            background: #5a6268;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        label {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
        }

        input, select, textarea {
            padding: 10px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 0.95rem;
            outline: none;
            transition: border-color 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            border-color: #43cea2;
        }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .image-upload {
            border: 2px dashed #e0e0e0;
            border-radius: 8px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-upload:hover {
            border-color: #43cea2;
            background: #f8fff8;
        }

        .image-upload input {
            display: none;
        }

        .image-preview {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .image-preview img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #e0e0e0;
        }

        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .chart-container h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .images-gallery {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }

        .images-gallery h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .gallery-item {
            position: relative;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .gallery-item img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .gallery-item-label {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 8px;
            font-size: 0.85rem;
        }

        .records-timeline {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .records-timeline h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .timeline-item {
            border-left: 3px solid #43cea2;
            padding-left: 20px;
            padding-bottom: 20px;
            margin-bottom: 15px;
            position: relative;
        }

        .timeline-item:before {
            content: '';
            position: absolute;
            left: -7px;
            top: 0;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #43cea2;
        }

        .timeline-item.problem:before {
            background: #f44336;
        }

        .timeline-date {
            font-weight: 600;
            color: #43cea2;
            margin-bottom: 5px;
        }

        .timeline-content {
            color: #666;
            font-size: 0.95rem;
        }

        .template-fields {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .field-item {
            background: white;
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .view-container {
            display: none;
        }

        .view-container.active {
            display: block;
        }

        @media (max-width: 1024px) {
            .form-grid {
                grid-template-columns: 1fr;
            }

            .chart-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }

            .projects-grid {
                grid-template-columns: 1fr;
            }

            .gallery-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìì Farm Logbook</h1>
            <p class="subtitle">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πà‡∏ß‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏Ñ‡∏¥‡∏î</p>
        </header>

        <div class="tab-nav">
            <button class="tab-button active" onclick="showTab('projects')">üìã ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á</button>
            <button class="tab-button" onclick="showTab('collect')">‚ö° ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏î‡πà‡∏ß‡∏ô</button>
            <button class="tab-button" onclick="showTab('templates')">üìù Templates</button>
        </div>

        <!-- Tab 1: Projects -->
        <div id="projects" class="tab-content active">
            <!-- Projects List View -->
            <div id="projectsListView" class="view-container active">
                <div class="card">
                    <h2>üìã ‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á (Structured Research)</h2>
                    <p style="color: #666; margin-bottom: 20px;">
                        <strong>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡πÉ‡∏ä‡πâ:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡∏ö‡∏ö<br>
                        <strong>‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:</strong> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö
                    </p>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; margin-top: 20px;">
                        <h3 style="margin: 0;">‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <button class="btn" onclick="showCreateProject()">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</button>
                    </div>
                    <div class="projects-grid" id="projectsGrid"></div>
                </div>
            </div>

            <!-- Create Project View -->
            <div id="createProjectView" class="view-container">
                <div class="card">
                    <button class="back-btn" onclick="showProjectsList()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡∏°‡πà</h2>
                    <form id="projectForm" onsubmit="createProject(event)">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>
                                <input type="text" id="projectName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏° Variety A vs B" required>
                            </div>
                            <div class="form-group">
                                <label>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö</label>
                                <input type="text" id="projectOwner" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ô‡∏±‡∏Å‡∏ß‡∏¥‡∏à‡∏±‡∏¢" required>
                            </div>
                            <div class="form-group">
                                <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°</label>
                                <input type="date" id="projectStartDate" required>
                            </div>
                            <div class="form-group">
                                <label>Template</label>
                                <select id="projectTemplate" onchange="updateTemplatePreview()">
                                    <option value="fillice">Template: Fillice</option>
                                    <option value="leafy">Template: ‡∏ú‡∏±‡∏Å‡πÉ‡∏ö</option>
                                    <option value="fruity">Template: ‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ</option>
                                    <option value="custom">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                                </select>
                            </div>
                            <div class="form-group full-width">
                                <label>‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>
                                <textarea id="projectDesc" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á"></textarea>
                            </div>
                            <div class="form-group full-width">
                                <label>‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö (‡∏à‡∏≤‡∏Å Template)</label>
                                <div class="template-fields" id="templateFieldsPreview">
                                    <div class="field-item">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (cm)</div>
                                    <div class="field-item">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö</div>
                                    <div class="field-item">‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏ö (cm)</div>
                                    <div class="field-item">‡∏™‡∏µ‡πÉ‡∏ö</div>
                                    <div class="field-item">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (g)</div>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 30px; display: flex; gap: 15px;">
                            <button type="submit" class="btn">‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</button>
                            <button type="button" class="btn btn-secondary" onclick="showProjectsList()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Project Detail View -->
            <div id="projectDetailView" class="view-container">
                <div class="card">
                    <button class="back-btn" onclick="showProjectsList()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                    <div id="projectDetailContent"></div>
                </div>
            </div>

            <!-- Crop Timeline View -->
            <div id="cropTimelineView" class="view-container">
                <button class="back-btn" onclick="backToProject()">‚Üê ‡∏Å‡∏•‡∏±‡∏ö</button>
                <div id="cropTimelineContent"></div>
            </div>
        </div>

        <!-- Tab 3: Templates -->
        <div id="templates" class="tab-content">
            <div class="card">
                <h2>üìù Data Field Templates</h2>
                <p style="color: #666; margin-bottom: 20px;">
                    <strong>‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£:</strong> ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô<br>
                    <strong>‡∏ó‡∏≥‡πÑ‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç:</strong> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏ó‡∏£‡∏ô AI ‡πÉ‡∏ô‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
                </p>
                <div class="projects-grid">
                    <div class="project-card">
                        <h3>Template: Fillice</h3>
                        <p style="color: #666; margin: 10px 0;">‡∏ü‡∏¥‡∏•‡∏î‡πå: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡πâ‡∏ô, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÉ‡∏ö, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏ö, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏°, ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Å, ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏Å, ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥</p>
                        <div class="project-meta">
                            <span>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 1 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á (72 ‡∏ï‡πâ‡∏ô)</span>
                            <span class="badge green">Active</span>
                        </div>
                    </div>
                    <div class="project-card">
                        <h3>Template: ‡∏ú‡∏±‡∏Å‡πÉ‡∏ö</h3>
                        <p style="color: #666; margin: 10px 0;">‡∏ü‡∏¥‡∏•‡∏î‡πå: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö, ‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏ö, ‡∏™‡∏µ‡πÉ‡∏ö, ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</p>
                        <div class="project-meta">
                            <span>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 8 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
                            <span class="badge blue">Default</span>
                        </div>
                    </div>
                    <div class="project-card">
                        <h3>Template: ‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ</h3>
                        <p style="color: #666; margin: 10px 0;">‡∏ü‡∏¥‡∏•‡∏î‡πå: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á, ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•, ‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡∏•, ‡∏™‡∏µ, ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡∏•, Brix</p>
                        <div class="project-meta">
                            <span>‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
                            <span class="badge blue">Default</span>
                        </div>
                    </div>
                    <div class="project-card" style="background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); color: white;">
                        <h3 style="color: white;">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á Template ‡πÉ‡∏´‡∏°‡πà</h3>
                        <p style="color: rgba(255,255,255,0.9); margin: 10px 0;">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏≠‡∏á</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tab 2: Quick Collect -->
        <div id="collect" class="tab-content">
            <div class="card">
                <h2>‚ö° ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πà‡∏ß‡∏ô (Quick Collect)</h2>
                <p style="color: #666; margin-bottom: 20px;">
                    <strong>‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡πÉ‡∏ä‡πâ:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏û‡∏ö‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÑ‡∏°‡πà‡∏Ñ‡∏≤‡∏î‡∏Ñ‡∏¥‡∏î ‡πÄ‡∏ä‡πà‡∏ô ‡πÉ‡∏ö‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ ‡πÅ‡∏°‡∏•‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏´‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥<br>
                    <strong>‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:</strong> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏£‡πá‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏¢‡∏≠‡∏∞ ‡πÅ‡∏Ñ‡πà‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
                </p>
                <form id="quickDataForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</label>
                            <select id="quickProject" onchange="updateQuickCrops()" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Crop</label>
                            <select id="quickCrop" required>
                                <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Crop</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</label>
                            <input type="date" id="quickDate" required>
                        </div>
                        <div class="form-group">
                            <label>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</label>
                            <select id="quickType" required>
                                <option value="observation">‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                                <option value="problem">‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤</option>
                                <option value="milestone">Milestone ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</option>
                            </select>
                        </div>
                        <div class="form-group full-width">
                            <label>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</label>
                            <textarea id="quickNotes" placeholder="‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï ‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°..." required></textarea>
                        </div>
                        <div class="form-group full-width">
                            <label>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
                            <div class="image-upload" onclick="document.getElementById('quickImages').click()">
                                <input type="file" id="quickImages" accept="image/*" multiple onchange="previewQuickImages(event)">
                                <p>‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</p>
                                <p style="font-size: 0.85rem; color: #999; margin-top: 10px;">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÑ‡∏î‡πâ</p>
                            </div>
                            <div class="image-preview" id="quickImagePreview"></div>
                        </div>
                    </div>
                    <div style="margin-top: 30px; display: flex; gap: 15px;">
                        <button type="submit" class="btn">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                        <button type="reset" class="btn btn-secondary">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Templates data
        const templates = {
            leafy: {
                name: '‡∏ú‡∏±‡∏Å‡πÉ‡∏ö',
                fields: ['‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (cm)', '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö', '‡∏Ç‡∏ô‡∏≤‡∏î‡πÉ‡∏ö (cm)', '‡∏™‡∏µ‡πÉ‡∏ö', '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å (g)']
            },
            fruity: {
                name: '‡∏ú‡∏±‡∏Å‡∏ú‡∏•‡πÑ‡∏°‡πâ',
                fields: ['‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á (cm)', '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏•', '‡∏Ç‡∏ô‡∏≤‡∏î‡∏ú‡∏• (cm)', '‡∏™‡∏µ', '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ú‡∏• (g)', 'Brix (%)']
            },
            fillice: {
                name: 'Fillice (‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î)',
                fields: [
                    '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏ï‡πâ‡∏ô (cm)',
                    '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÉ‡∏ö (cm)',
                    '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏ö (cm)',
                    '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö',
                    '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏° (cm)',
                    '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏ß‡∏°‡∏£‡∏≤‡∏Å (g)',
                    '‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏ï‡∏±‡∏î‡∏£‡∏≤‡∏Å (g)',
                    '‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
                    '‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô'
                ]
            }
        };

        // Projects data based on Lab A.xlsx
        let projects = [
            {
                id: 1,
                name: 'Lab A - Fillice Crop 2 (72 ‡∏ï‡πâ‡∏ô)',
                description: '‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á Fillice 72 ‡∏ï‡πâ‡∏ô ‡∏ï‡∏≤‡∏°‡πÅ‡∏ú‡∏ô Lab A - ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ 42 ‡∏ß‡∏±‡∏ô (‡πÄ‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏•‡πá‡∏î ‚Üí ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏á ‚Üí ‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏• ‚Üí ‡∏õ‡∏•‡∏π‡∏Å 4 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå)',
                startDate: '2025-06-11',
                owner: '‡∏ó‡∏µ‡∏°‡∏ß‡∏¥‡∏à‡∏±‡∏¢ Lab A',
                status: 'active',
                template: 'fillice',
                experimentPlan: {
                    germination: { days: 3, date: '11/06/68' },
                    lighting: { days: 4, date: '14/06/68' },
                    nursery: { days: 7, date: '18/06/68' },
                    week1: { days: 7, date: '25/06/68' },
                    week2: { days: 7, date: '02/07/68' },
                    week3: { days: 7, date: '09/07/68' },
                    week4: { days: 7, date: '16/07/68' },
                    harvest: { days: 42, date: '22/07/68' }
                },
                environment: {
                    germination: { temp: '25¬±1¬∞C', humidity: '70-80%', co2: '1000¬±150 ppm' },
                    lighting: { light: 'W (White)', ppfd: '150 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', fertilizer: 'Vesco No1' },
                    nursery: { light: 'W (White)', ppfd: '150 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', ec: '0.8', ph: '5.5-5.6' },
                    growing: {
                        week1: { light: '1:8 (R:B)', ppfd: '250 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', ec: '2.2', ph: '5.5-5.6', fertilizer: 'Vesco No1' },
                        week2: { light: '1:8 (R:B)', ppfd: '250 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', ec: '2.2', ph: '5.5-5.6', fertilizer: '‡∏™‡∏∏‡∏ï‡∏£ K ‡∏ï‡πà‡∏≥' },
                        week3: { light: '1:8 (R:B)', ppfd: '250 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', ec: '2.2', ph: '5.5-5.6', fertilizer: '‡∏™‡∏∏‡∏ï‡∏£ K ‡∏ï‡πà‡∏≥' },
                        week4: { light: '1:8 (R:B)', ppfd: '250 ¬µmol/m¬≤/s', hours: '14 ‡∏ä‡∏°.', ec: '2.2', ph: '5.5-5.6', fertilizer: '‡∏™‡∏∏‡∏ï‡∏£ K ‡∏ï‡πà‡∏≥' }
                    }
                },
                crops: [
                    {
                        id: 1,
                        cropId: 'FILLICE-LAB-A-CROP2',
                        plantType: 'Fillice (‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°)',
                        plantDate: '2025-06-11',
                        plantCount: 72,
                        location: 'Lab A - Layer 2',
                        layer: 'Layer 2',
                        status: 'growing',
                        records: [
                            // ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1 - ‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 1-6 (‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á)
                            { date: '2025-06-25', plantNo: 1, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1', age: 14, height: 3.5, leafLength: 4.8, leafWidth: 2.3, leafCount: 4, canopyWidth: 6.2, type: 'observation', notes: '‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï', images: ['https://via.placeholder.com/150x100/8BC34A/ffffff?text=P1-W1'] },
                            { date: '2025-06-25', plantNo: 2, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1', age: 14, height: 3.2, leafLength: 4.5, leafWidth: 2.1, leafCount: 4, canopyWidth: 5.8, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏õ‡∏Å‡∏ï‡∏¥', images: ['https://via.placeholder.com/150x100/8BC34A/ffffff?text=P2-W1'] },
                            { date: '2025-06-25', plantNo: 3, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1', age: 14, height: 3.8, leafLength: 5.1, leafWidth: 2.5, leafCount: 4, canopyWidth: 6.5, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ', images: ['https://via.placeholder.com/150x100/8BC34A/ffffff?text=P3-W1'] },

                            // ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 2
                            { date: '2025-07-02', plantNo: 1, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 2', age: 21, height: 7.2, leafLength: 8.5, leafWidth: 4.8, leafCount: 8, canopyWidth: 11.2, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á', images: ['https://via.placeholder.com/150x100/4CAF50/ffffff?text=P1-W2'] },
                            { date: '2025-07-02', plantNo: 2, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 2', age: 21, height: 6.8, leafLength: 8.2, leafWidth: 4.5, leafCount: 8, canopyWidth: 10.5, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏õ‡∏Å‡∏ï‡∏¥', images: ['https://via.placeholder.com/150x100/4CAF50/ffffff?text=P2-W2'] },
                            { date: '2025-07-02', plantNo: 15, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 2', age: 21, height: 5.2, leafLength: 6.8, leafWidth: 3.5, leafCount: 6, canopyWidth: 8.5, abnormality: '‡πÉ‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á ‡∏Ç‡∏≠‡∏ö‡πÉ‡∏ö‡πÑ‡∏´‡∏°‡πâ', type: 'problem', notes: '‡∏û‡∏ö‡∏≠‡∏≤‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥ EC ‡∏≠‡∏≤‡∏à‡∏™‡∏π‡∏á‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ', images: ['https://via.placeholder.com/150x100/FF9800/ffffff?text=P15-Problem'] },

                            // ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 3
                            { date: '2025-07-09', plantNo: 1, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 3', age: 28, height: 12.1, leafLength: 13.5, leafWidth: 7.8, leafCount: 12, canopyWidth: 17.2, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ‡∏°‡∏≤‡∏Å', images: ['https://via.placeholder.com/150x100/2E7D32/ffffff?text=P1-W3'] },
                            { date: '2025-07-09', plantNo: 2, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 3', age: 28, height: 11.5, leafLength: 12.8, leafWidth: 7.2, leafCount: 12, canopyWidth: 16.3, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏ï‡πà‡∏≠‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á', images: ['https://via.placeholder.com/150x100/2E7D32/ffffff?text=P2-W3'] },

                            // ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 4 + ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß
                            { date: '2025-07-16', plantNo: 1, stage: '‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 4', age: 35, height: 15.8, leafLength: 17.2, leafWidth: 10.5, leafCount: 18, canopyWidth: 23.5, type: 'observation', notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÄ‡∏ï‡πá‡∏°‡∏ó‡∏µ‡πà', images: ['https://via.placeholder.com/150x100/1B5E20/ffffff?text=P1-W4'] },
                            { date: '2025-07-22', plantNo: 1, stage: '‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß', age: 42, height: 15.8, leafLength: 17.2, leafWidth: 10.5, leafCount: 18, canopyWidth: 23.5, rootWeightTotal: 192.5, rootWeightCut: 172.3, type: 'milestone', notes: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏°‡∏≤‡∏Å', images: ['https://via.placeholder.com/150x100/1B5E20/ffffff?text=Harvest-1', 'https://via.placeholder.com/150x100/1B5E20/ffffff?text=Root-1'] },
                            { date: '2025-07-22', plantNo: 2, stage: '‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß', age: 42, height: 15.2, leafLength: 16.5, leafWidth: 9.8, leafCount: 18, canopyWidth: 22.5, rootWeightTotal: 185.5, rootWeightCut: 165.2, type: 'milestone', notes: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ', images: ['https://via.placeholder.com/150x100/1B5E20/ffffff?text=Harvest-2', 'https://via.placeholder.com/150x100/1B5E20/ffffff?text=Root-2'] },
                            { date: '2025-07-22', plantNo: 3, stage: '‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß', age: 42, height: 16.1, leafLength: 17.8, leafWidth: 10.8, leafCount: 20, canopyWidth: 24.2, rootWeightTotal: 198.3, rootWeightCut: 178.5, type: 'milestone', notes: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°', images: ['https://via.placeholder.com/150x100/1B5E20/ffffff?text=Harvest-3', 'https://via.placeholder.com/150x100/1B5E20/ffffff?text=Root-3'] }
                        ]
                    }
                ]
            },
            {
                id: 2,
                name: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏° Variety A vs B',
                description: '‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏Ç‡∏≠‡∏á‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏°‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå A ‡πÅ‡∏•‡∏∞ B ‡∏†‡∏≤‡∏¢‡πÉ‡∏ï‡πâ‡∏™‡∏†‡∏≤‡∏ß‡∏∞‡πÅ‡∏™‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô',
                startDate: '2025-10-01',
                owner: '‡∏î‡∏£.‡∏™‡∏°‡∏ä‡∏≤‡∏¢',
                status: 'active',
                template: 'leafy',
                crops: [
                    {
                        id: 1,
                        cropId: 'CROP-2025-001',
                        plantType: '‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏° Variety A',
                        plantDate: '2025-10-01',
                        location: '‡πÇ‡∏£‡∏á‡∏õ‡∏•‡∏π‡∏Å 1 - ‡∏ä‡∏±‡πâ‡∏ô 2',
                        status: 'growing',
                        records: [
                            {
                                date: '2025-10-08',
                                type: 'milestone',
                                growthStage: '‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≤‡∏¢',
                                height: 3.5,
                                leafCount: 2,
                                leafSize: 2.0,
                                notes: '‡∏¢‡πâ‡∏≤‡∏¢‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ',
                                image: 'https://via.placeholder.com/300x200/8BC34A/ffffff?text=Transplant'
                            },
                            {
                                date: '2025-10-15',
                                type: 'observation',
                                growthStage: '‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï',
                                height: 8.5,
                                leafCount: 6,
                                leafSize: 5.2,
                                notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ ‡πÉ‡∏ö‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏î',
                                image: 'https://via.placeholder.com/300x200/4CAF50/ffffff?text=Growing'
                            },
                            {
                                date: '2025-10-22',
                                type: 'problem',
                                growthStage: '‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤',
                                height: 10.5,
                                leafCount: 7,
                                leafSize: 6.0,
                                notes: '‡∏û‡∏ö‡πÉ‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á EC ‡∏™‡∏π‡∏á‡∏ú‡∏¥‡∏î‡∏õ‡∏Å‡∏ï‡∏¥',
                                images: [
                                    'https://via.placeholder.com/300x200/FF9800/ffffff?text=Yellow+Leaf+1',
                                    'https://via.placeholder.com/300x200/FF9800/ffffff?text=Yellow+Leaf+2'
                                ]
                            },
                            {
                                date: '2025-10-28',
                                type: 'observation',
                                growthStage: '‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï',
                                height: 14.2,
                                leafCount: 10,
                                leafSize: 9.5,
                                notes: '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç EC ‡πÅ‡∏•‡πâ‡∏ß ‡πÉ‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß',
                                image: 'https://via.placeholder.com/300x200/4CAF50/ffffff?text=Recovering'
                            },
                            {
                                date: '2025-11-01',
                                type: 'milestone',
                                growthStage: '‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß',
                                height: 18.5,
                                leafCount: 12,
                                leafSize: 12.5,
                                weight: 185,
                                notes: '‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß ‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å 185g',
                                images: [
                                    'https://via.placeholder.com/300x200/2E7D32/ffffff?text=Harvest+Top',
                                    'https://via.placeholder.com/300x200/2E7D32/ffffff?text=Harvest+Side'
                                ]
                            }
                        ]
                    },
                    {
                        id: 2,
                        cropId: 'CROP-2025-002',
                        plantType: '‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏´‡∏≠‡∏° Variety B',
                        plantDate: '2025-10-01',
                        location: '‡πÇ‡∏£‡∏á‡∏õ‡∏•‡∏π‡∏Å 1 - ‡∏ä‡∏±‡πâ‡∏ô 2',
                        status: 'growing',
                        records: [
                            {
                                date: '2025-10-08',
                                type: 'milestone',
                                growthStage: '‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≤‡∏¢',
                                height: 4.0,
                                leafCount: 2,
                                leafSize: 2.5,
                                notes: '‡∏¢‡πâ‡∏≤‡∏¢‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö',
                                image: 'https://via.placeholder.com/300x200/2196F3/ffffff?text=Transplant'
                            },
                            {
                                date: '2025-10-15',
                                type: 'observation',
                                growthStage: '‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï',
                                height: 10.5,
                                leafCount: 7,
                                leafSize: 6.8,
                                notes: '‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ',
                                image: 'https://via.placeholder.com/300x200/1976D2/ffffff?text=Growing'
                            }
                        ]
                    }
                ]
            },
            {
                id: 2,
                name: '‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏Ç‡∏≠‡∏á PPFD ‡∏ï‡πà‡∏≠‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏°',
                description: '‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ú‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏°‡πÅ‡∏™‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏°',
                startDate: '2025-10-15',
                owner: '‡∏î‡∏£.‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á',
                status: 'active',
                template: 'leafy',
                crops: [
                    {
                        id: 3,
                        cropId: 'CROP-2025-003',
                        plantType: '‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏° PPFD 150',
                        plantDate: '2025-10-15',
                        location: '‡πÇ‡∏£‡∏á‡∏õ‡∏•‡∏π‡∏Å 2 - ‡∏ä‡∏±‡πâ‡∏ô 1',
                        status: 'growing',
                        records: [
                            {
                                date: '2025-10-25',
                                type: 'milestone',
                                growthStage: '‡∏ß‡∏±‡∏ô‡∏¢‡πâ‡∏≤‡∏¢',
                                height: 8.5,
                                leafCount: 6,
                                leafSize: 5.5,
                                notes: '‡∏¢‡πâ‡∏≤‡∏¢‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï‡∏î‡∏µ',
                                image: 'https://via.placeholder.com/300x200/FF9800/ffffff?text=Spinach+Transplant'
                            }
                        ]
                    }
                ]
            }
        ];

        let currentProject = null;
        let currentCrop = null;

        // Initialize
        document.getElementById('projectStartDate').valueAsDate = new Date();
        document.getElementById('quickDate').valueAsDate = new Date();
        renderProjects();
        updateQuickProjectOptions();

        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'projects') {
                renderProjects();
            } else if (tabName === 'collect') {
                updateQuickProjectOptions();
            }
        }

        function renderProjects() {
            const grid = document.getElementById('projectsGrid');
            grid.innerHTML = projects.map(project => {
                const totalRecords = project.crops.reduce((sum, crop) => sum + crop.records.length, 0);
                return `
                    <div class="project-card" onclick="viewProject(${project.id})">
                        <h3>${project.name}</h3>
                        <p style="color: #666; margin: 10px 0;">${project.description}</p>
                        <div class="project-meta">
                            <span>${project.crops.length} Crops | ${totalRecords} ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</span>
                            <span class="badge ${project.status}">${project.status === 'active' ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' : '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'}</span>
                        </div>
                        <div style="margin-top: 10px; font-size: 0.9em; color: #888;">
                            <div>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${project.owner}</div>
                            <div>Template: ${templates[project.template].name}</div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showProjectsList() {
            document.getElementById('projectsListView').classList.add('active');
            document.getElementById('createProjectView').classList.remove('active');
            document.getElementById('projectDetailView').classList.remove('active');
            renderProjects();
        }

        function showCreateProject() {
            document.getElementById('projectsListView').classList.remove('active');
            document.getElementById('createProjectView').classList.add('active');
            updateTemplatePreview();
        }

        function updateTemplatePreview() {
            const templateSelect = document.getElementById('projectTemplate');
            const templateId = templateSelect.value;
            const preview = document.getElementById('templateFieldsPreview');

            if (templateId === 'custom') {
                preview.innerHTML = '<p style="color: #888;">‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡πÉ‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</p>';
            } else {
                const template = templates[templateId];
                preview.innerHTML = template.fields.map(field =>
                    `<div class="field-item">${field}</div>`
                ).join('');
            }
        }

        function createProject(event) {
            event.preventDefault();
            const newProject = {
                id: projects.length + 1,
                name: document.getElementById('projectName').value,
                description: document.getElementById('projectDesc').value,
                startDate: document.getElementById('projectStartDate').value,
                owner: document.getElementById('projectOwner').value,
                template: document.getElementById('projectTemplate').value,
                status: 'active',
                crops: []
            };
            projects.push(newProject);
            alert('‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
            showProjectsList();
            document.getElementById('projectForm').reset();
        }

        function viewProject(projectId) {
            currentProject = projects.find(p => p.id === projectId);
            document.getElementById('projectsListView').classList.remove('active');
            document.getElementById('projectDetailView').classList.add('active');

            const content = document.getElementById('projectDetailContent');
            const totalRecords = currentProject.crops.reduce((sum, crop) => sum + crop.records.length, 0);

            content.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 30px;">
                    <div>
                        <h2>${currentProject.name}</h2>
                        <p style="color: #666; margin-top: 10px;">${currentProject.description}</p>
                        <div style="margin-top: 15px; color: #888;">
                            <div>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°: ${currentProject.startDate}</div>
                            <div>‡∏ú‡∏π‡πâ‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö: ${currentProject.owner}</div>
                            <div>Template: ${templates[currentProject.template].name}</div>
                            <div>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="badge ${currentProject.status}">${currentProject.status === 'active' ? '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' : '‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô'}</span></div>
                        </div>
                    </div>
                    <button class="btn" onclick="alert('‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≠‡∏ö‡∏õ‡∏•‡∏π‡∏Å‡∏à‡∏∞‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡πá‡∏ß ‡πÜ ‡∏ô‡∏µ‡πâ')">+ ‡πÄ‡∏û‡∏¥‡πà‡∏° Crop</button>
                </div>

                <h3 style="margin-bottom: 15px;">Crops ‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ (${currentProject.crops.length} Crops, ${totalRecords} ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)</h3>
                <div class="projects-grid">
                    ${currentProject.crops.map(crop => {
                        const latestRecord = crop.records[crop.records.length - 1];
                        const hasProblem = crop.records.some(r => r.type === 'problem');
                        let icon = 'ü•ó';
                        if (crop.plantType.includes('‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤')) icon = 'ü•¨';
                        else if (crop.plantType.includes('‡∏ú‡∏±‡∏Å‡πÇ‡∏Ç‡∏°')) icon = 'üåø';
                        else if (crop.plantType.includes('‡πÇ‡∏´‡∏£‡∏∞‡∏û‡∏≤')) icon = 'üåø';

                        return `
                            <div class="data-card" onclick="viewCropTimeline(${crop.id})">
                                <div class="crop-icon">${icon}</div>
                                <div class="data-card-content">
                                    <div class="data-card-title">${crop.cropId}</div>
                                    <div class="data-card-info">
                                        <div><strong>‡∏ä‡∏ô‡∏¥‡∏î:</strong> ${crop.plantType}</div>
                                        <div><strong>‡∏ß‡∏±‡∏ô‡∏õ‡∏•‡∏π‡∏Å:</strong> ${crop.plantDate}</div>
                                        <div><strong>‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á:</strong> ${crop.location}</div>
                                        <div><strong>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</strong> ${crop.records.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</div>
                                        ${hasProblem ? '<div><span class="badge red">‡πÄ‡∏Ñ‡∏¢‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤</span></div>' : ''}
                                        <div><strong>‡∏£‡∏∞‡∏¢‡∏∞‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î:</strong> <span class="badge blue">${latestRecord.growthStage}</span></div>
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                    ${currentProject.crops.length === 0 ? '<p style="color: #888; grid-column: 1/-1; text-align: center; padding: 40px;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Crop ‡πÉ‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ</p>' : ''}
                </div>
            `;
        }

        function viewCropTimeline(cropId) {
            currentCrop = currentProject.crops.find(c => c.id === cropId);
            document.getElementById('projectDetailView').classList.remove('active');
            document.getElementById('cropTimelineView').classList.add('active');

            const content = document.getElementById('cropTimelineContent');
            content.innerHTML = `
                <div class="card">
                    <h2>${currentCrop.cropId} - ${currentCrop.plantType}</h2>
                    <p style="color: #666; margin-bottom: 10px;">‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£: ${currentProject.name}</p>
                    <p style="color: #666;">‡∏ß‡∏±‡∏ô‡∏õ‡∏•‡∏π‡∏Å: ${currentCrop.plantDate} | ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á: ${currentCrop.location} | ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${currentCrop.records.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                </div>

                ${currentProject.experimentPlan ? `
                <div class="card" style="margin-bottom: 20px;">
                    <h3 style="margin-bottom: 15px;">üìã ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á (Experiment Plan)</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); color: white;">
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡πÄ‡∏û‡∏≤‡∏∞‡πÄ‡∏°‡∏•‡πá‡∏î</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.germination.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.germination.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡∏≠‡∏∏‡∏ì‡∏´‡∏†‡∏π‡∏°‡∏¥: ${currentProject.environment.germination.temp} | ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡∏∑‡πâ‡∏ô: ${currentProject.environment.germination.humidity} | CO‚ÇÇ: ${currentProject.environment.germination.co2}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏á</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.lighting.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.lighting.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.lighting.light} | PPFD: ${currentProject.environment.lighting.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.lighting.hours} | ‡∏õ‡∏∏‡πã‡∏¢: ${currentProject.environment.lighting.fertilizer}
                                    </td>
                                </tr>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡∏≠‡∏ô‡∏∏‡∏ö‡∏≤‡∏•</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.nursery.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.nursery.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.nursery.light} | PPFD: ${currentProject.environment.nursery.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.nursery.hours} | EC: ${currentProject.environment.nursery.ec} | pH: ${currentProject.environment.nursery.ph}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡∏õ‡∏•‡∏π‡∏Å ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 1</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week1.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week1.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.growing.week1.light} | PPFD: ${currentProject.environment.growing.week1.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.growing.week1.hours} | EC: ${currentProject.environment.growing.week1.ec} | pH: ${currentProject.environment.growing.week1.ph} | ‡∏õ‡∏∏‡πã‡∏¢: ${currentProject.environment.growing.week1.fertilizer}
                                    </td>
                                </tr>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡∏õ‡∏•‡∏π‡∏Å ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 2</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week2.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week2.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.growing.week2.light} | PPFD: ${currentProject.environment.growing.week2.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.growing.week2.hours} | EC: ${currentProject.environment.growing.week2.ec} | pH: ${currentProject.environment.growing.week2.ph} | ‡∏õ‡∏∏‡πã‡∏¢: ${currentProject.environment.growing.week2.fertilizer}
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡∏õ‡∏•‡∏π‡∏Å ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 3</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week3.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week3.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.growing.week3.light} | PPFD: ${currentProject.environment.growing.week3.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.growing.week3.hours} | EC: ${currentProject.environment.growing.week3.ec} | pH: ${currentProject.environment.growing.week3.ph} | ‡∏õ‡∏∏‡πã‡∏¢: ${currentProject.environment.growing.week3.fertilizer}
                                    </td>
                                </tr>
                                <tr style="background: #f9f9f9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡∏õ‡∏•‡∏π‡∏Å ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ó‡∏µ‡πà 4</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week4.days} ‡∏ß‡∏±‡∏ô</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${currentProject.experimentPlan.week4.date}</td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                        ‡πÅ‡∏™‡∏á: ${currentProject.environment.growing.week4.light} | PPFD: ${currentProject.environment.growing.week4.ppfd} | ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á: ${currentProject.environment.growing.week4.hours} | EC: ${currentProject.environment.growing.week4.ec} | pH: ${currentProject.environment.growing.week4.ph} | ‡∏õ‡∏∏‡πã‡∏¢: ${currentProject.environment.growing.week4.fertilizer}
                                    </td>
                                </tr>
                                <tr style="background: #e8f5e9;">
                                    <td style="padding: 10px; border: 1px solid #ddd;"><strong>‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;"><strong>${currentProject.experimentPlan.harvest.days} ‡∏ß‡∏±‡∏ô</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; text-align: center;"><strong>${currentProject.experimentPlan.harvest.date}</strong></td>
                                    <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;"><strong>‡∏£‡∏ß‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                ` : ''}

                <div class="card">
                    <h3 style="margin-bottom: 15px;">üìä ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏û‡∏∑‡∏ä (Plant Measurements)</h3>
                    <div style="overflow-x: auto;">
                        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
                            <thead>
                                <tr style="background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%); color: white;">
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏£‡∏∞‡∏¢‡∏∞</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏≠‡∏≤‡∏¢‡∏∏ (‡∏ß‡∏±‡∏ô)</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á<br>(cm)</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏¢‡∏≤‡∏ß‡πÉ‡∏ö<br>(cm)</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏Å‡∏ß‡πâ‡∏≤‡∏á‡πÉ‡∏ö<br>(cm)</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ö</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏ó‡∏£‡∏á‡∏û‡∏∏‡πà‡∏°<br>(cm)</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å‡∏£‡∏≤‡∏Å<br>(g)</th>
                                    <th style="padding: 12px; text-align: left; border: 1px solid #ddd;">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                                    <th style="padding: 12px; text-align: center; border: 1px solid #ddd;">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${currentCrop.records.map(r => {
                                    const isHarvest = r.type === 'milestone' && r.stage === '‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß';
                                    const isProblem = r.type === 'problem';
                                    const rowColor = isProblem ? '#fff3e0' : isHarvest ? '#e8f5e9' : '#ffffff';
                                    const imageCount = (r.images || [r.image]).filter(Boolean).length;

                                    return `
                                        <tr style="background: ${rowColor}; ${isProblem ? 'border-left: 4px solid #ff9800;' : isHarvest ? 'border-left: 4px solid #4caf50;' : ''}">
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center; white-space: nowrap;">${r.date}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center; font-weight: bold;">${r.plantNo || '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center; white-space: nowrap;">
                                                ${r.stage}
                                                ${isProblem ? '<br><span class="badge red" style="font-size: 11px;">‡∏õ‡∏±‡∏ç‡∏´‡∏≤</span>' : ''}
                                                ${isHarvest ? '<br><span class="badge green" style="font-size: 11px;">‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß</span>' : ''}
                                            </td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.age || '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.height !== undefined ? r.height : '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.leafLength !== undefined ? r.leafLength : '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.leafWidth !== undefined ? r.leafWidth : '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.leafCount !== undefined ? r.leafCount : '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">${r.canopyWidth !== undefined ? r.canopyWidth : '-'}</td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">
                                                ${r.rootWeightTotal !== undefined ? `<strong>${r.rootWeightTotal}</strong><br><span style="font-size: 11px; color: #666;">(‡∏ï‡∏±‡∏î: ${r.rootWeightCut})</span>` : '-'}
                                            </td>
                                            <td style="padding: 10px; border: 1px solid #ddd; font-size: 13px;">
                                                ${r.abnormality ? `<div style="color: #d32f2f; font-weight: bold; margin-bottom: 5px;">‚ö†Ô∏è ${r.abnormality}</div>` : ''}
                                                ${r.notes}
                                            </td>
                                            <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">
                                                ${imageCount > 0 ? `üì∑ ${imageCount}` : '-'}
                                            </td>
                                        </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
        }

        function backToProject() {
            document.getElementById('cropTimelineView').classList.remove('active');
            document.getElementById('projectDetailView').classList.add('active');
        }

        function updateQuickProjectOptions() {
            const select = document.getElementById('quickProject');
            select.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£</option>' +
                projects.map(p => `<option value="${p.id}">${p.name}</option>`).join('');
        }

        function updateQuickCrops() {
            const projectId = parseInt(document.getElementById('quickProject').value);
            const select = document.getElementById('quickCrop');

            if (!projectId) {
                select.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Crop</option>';
                return;
            }

            const project = projects.find(p => p.id === projectId);
            select.innerHTML = '<option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Crop</option>' +
                project.crops.map(c => `<option value="${c.id}">${c.cropId} - ${c.plantType}</option>`).join('');
        }

        function previewQuickImages(event) {
            const preview = document.getElementById('quickImagePreview');
            preview.innerHTML = '';

            const files = event.target.files;
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                const reader = new FileReader();

                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    preview.appendChild(img);
                }

                reader.readAsDataURL(file);
            }
        }

        document.getElementById('quickDataForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!\n\n‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÉ‡∏ô Crop ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å');
            this.reset();
            document.getElementById('quickImagePreview').innerHTML = '';
        });
    </script>
</body>
</html>
